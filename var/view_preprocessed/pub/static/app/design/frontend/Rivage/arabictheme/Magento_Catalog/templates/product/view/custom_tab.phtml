<?php $_product = $block->getProduct(); $longdes = $block->escapeHtml($_product->getDescription()); $how_to_use = $_product->getHowToUse(); ?> <div id="pro1" class="product_short_des"><span class="tabheading"><?= __('Product details') ?></span> <?php echo html_entity_decode($longdes); ?></div><div id="how_to_use" class="product_short_des"><span class="tabheading"><?= __('How to Use') ?></span> <?php echo html_entity_decode($how_to_use); ?></div><?php $objectManager = \Magento\Framework\App\ObjectManager::getInstance(); $media_url = $objectManager->get('Magento\Store\Model\StoreManagerInterface')->getStore()->getBaseUrl(\Magento\Framework\UrlInterface::URL_TYPE_MEDIA); $baseurl = $objectManager->get('\Magento\Store\Model\StoreManagerInterface')->getStore()->getBaseUrl(); $ingredients = $_product->getResource()->getAttribute('ingredients')->getFrontend()->getValue($_product); if($ingredients){ $ingredients_array = explode(", ",$ingredients); ?> <div class="ingredientdetailpage"><strong><?= /* @escapeNotVerified */ __('Key Ingredients') ?></strong> <ul class="ingredientspelist_content owl-carousel" id="sync2"><?php foreach($ingredients_array as $ingredientname){ $ingredients_collection = $objectManager->get('Emizentech\ShopByBrand\Model\Items')->getCollection()->addFieldToFilter('name', $ingredientname); foreach($ingredients_collection as $fillter_ingredients){ ?> <li class="ingredients_list"><div class="ingredients_contents"><?php if($fillter_ingredients->getLogo() != ''){ ?> <span class="ingredientimage label"><img src="<?php echo $media_url.$fillter_ingredients->getLogo() ?>"/></span> <?php } ?> <span class="ingredientname label"><?php echo $fillter_ingredients->getAname(); ?></span></div></li> <?php } } ?></ul></div><div class="ingredientlider"><ul class="ingredientcontent owl-carousel" id="sync1"><?php foreach($ingredients_array as $ingredientname){ $ingredients_collection = $objectManager->get('Emizentech\ShopByBrand\Model\Items')->getCollection()->addFieldToFilter('name', $ingredientname); foreach($ingredients_collection as $fillter_ingredients){ ?> <li class="ingredients_list"><div class="ingredients_contents"><?php if($fillter_ingredients->getMainimage() != ''){ ?> <div class="ingredientmain_image"><img src="<?php echo $media_url.$fillter_ingredients->getMainimage(); ?>"/></div><?php } ?> <div class="ingredients_all_description"><p class="label ingredients-label"><?php echo $fillter_ingredients->getAname(); ?></p><div class="ingredients_description"><?php $ingredientsdes = $fillter_ingredients->getAdescription(); $ingredientsdes = html_entity_decode($ingredientsdes); if (strlen($ingredientsdes) < 372) echo($ingredientsdes); else { echo mb_substr($ingredientsdes, 0, 368,'UTF-8').'....';} ?></div><p class="discover_now"><?php if($fillter_ingredients->getUrlKey()==""){ ?> <a href="<?php echo $this->getUrl('ingredients/view',array('id'=>$fillter_ingredients->getId()));?>"><?= __('Discover') ?></a> <?php }else { ?> <a href="<?php echo $this->getUrl("ingredients/".$fillter_ingredients->getUrlKey());?>"><?= __('Discover') ?></a> <?php } ?></p></div></div></li> <?php } } ?></ul></div><?php } ?>