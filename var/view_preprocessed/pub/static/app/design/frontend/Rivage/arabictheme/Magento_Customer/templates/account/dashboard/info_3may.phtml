<?php /** * Copyright Â© Magento, Inc. All rights reserved. * See COPYING.txt for license details. */ /** @var \Magento\Customer\Block\Account\Dashboard\Info $block */ ?> <?php $objectManager = \Magento\Framework\App\ObjectManager::getInstance(); $customerSession = $objectManager->create('Magento\Customer\Model\Session'); $customerId = $customerSession->getCustomerId(); $registry = $objectManager->create('\Amasty\Rewards\Model\Rewards')->getCustomerRewards($customerId); #$reward_points = $registry->registry('current_amasty_rewards_statistic'); $objectManager = \Magento\Framework\App\ObjectManager::getInstance(); $orderCollection = $objectManager->create('\Magento\Sales\Model\ResourceModel\Order\Collection'); $orderCollection->addAttributeToFilter('customer_id',$customerId) ->load(); $ordercount = count($orderCollection); ?> <div class="block block-dashboard-info"><div class="fieldset-wrapper customer-information"><div class="point-summary"><div class="my-points"><div class="points-head"><?php /* @escapeNotVerified */ echo __('My points') ?></div><h2><?php $collection = $registry->getData(); echo $currentbalance = $collection[0]['points_left'];?> <span><?php echo __('Pts') ?></span></h2></div><div class="my-rewards"><div class="points-head"><?php /* @escapeNotVerified */ echo __('My Rewards') ?></div><h2><?php if($currentbalance <= 150){ $required = 150-$currentbalance; echo /* @escapeNotVerified */ $required."<span>pts away</span> "; ?></h2><div class="relable"><?php echo __('to get &#163; 15.00 voucher rewards') ?></div><?php }else{ ?> <div class="fullfill"><?php echo __('you can use reward');?></div><?php } ?></div><div class="shop_now reward"><a href="<?php echo $this->getUrl('face.html')?>"><?php echo __('Shop Now') ?></a></div></div></div><?php if($ordercount=="0"){ ?> <table class="data table table-order-items history customordertable"><caption class="table-caption"><?= /* @escapeNotVerified */ __('Orders') ?></caption><thead><tr><th scope="col" class="col date"><?= /* @escapeNotVerified */ __('Order Date') ?></th><th scope="col" class="col id"><?= /* @escapeNotVerified */ __('Order Number') ?></th><?= /* @noEscape */ $block->getChildHtml('extra.column.header') ?> <th scope="col" class="col shipping"><?= /* @escapeNotVerified */ __('Items') ?></th><th scope="col" class="col total"><?= /* @escapeNotVerified */ __('Total Paid') ?></th><th scope="col" class="col status"><?= /* @escapeNotVerified */ __('Status') ?></th></tr></thead></table><?php }?></div>