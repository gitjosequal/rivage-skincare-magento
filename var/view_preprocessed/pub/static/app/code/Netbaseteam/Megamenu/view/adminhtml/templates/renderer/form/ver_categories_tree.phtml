<style> .level-1 { margin-left: 25px; } .level-2, .level-3, .level-4, .level-5 { margin-left: 30px; } #top_sidetree ul li { list-style: none; } #top_sidetree ul li span { color: #000; } #mexpandVer { cursor: pointer; font-size: 18px; font-weight: bold; margin-right: 10px; }</style><?php function ver_get_categories() { $objectManagerr = \Magento\Framework\App\ObjectManager::getInstance(); $category = $objectManagerr->create('Magento\Catalog\Model\Category'); $tree = $category->getTreeModel(); $tree->load(); $ids = $tree->getCollection()->getAllIds(); $arr = array(); $arrayCategories = array(); if ($ids) { foreach ($ids as $id) { $cat = $objectManagerr->create('Magento\Catalog\Model\Category'); $cat->load($id); $arrayCategories[$id] = array("parent_id" => $cat->getParentId(), "name" => $cat->getName(), "cat_id" => $cat->getId(), "cat_level" => $cat->getLevel(), "cat_url" => $cat->getUrl() ); } return $arrayCategories; /* echo 'PK<pre>';
          print_r($arrayCategories);
          echo '</pre>'; */ } } $arrayCategories = ver_get_categories(); /* \zend_debug::dump($arrayCategories); */ function ver_createTree($array, $currentParent, $currLevel = 0, $prevLevel = -1) { $objectManager = \Magento\Framework\App\ObjectManager::getInstance(); $catalogSession = $objectManager->create('Magento\Catalog\Model\Session'); $selected_arr = explode(",", $catalogSession->getVerCatIds()); $objBlock = $objectManager->get('\Netbaseteam\Megamenu\Block\Navigation'); foreach ($array as $categoryId => $category) { if ($currentParent == $category['parent_id']) { if ($currLevel > $prevLevel){ if($category['cat_level'] >= 3){ $style = "style='display: none;'"; } else { $style = ""; } echo "<ul id='ul_".$categoryId."' class='level-".$category['cat_level']."' ".$style." >"; } if ($currLevel == $prevLevel) echo "</li> "; $cat_id_hidden = array('1','2'); if(in_array($categoryId,$cat_id_hidden)){ } else{ } /* class="level_'.$category['cat_level'].' " */ $chk = ""; if(in_array($categoryId, $selected_arr)){ $chk = ' checked="true"'; } echo ' <li id="li_'.$categoryId.'"><img id="ext-cus-'.$categoryId.'" class="my_folder">'; if($categoryId > 1){ $msgEpand = '<span style="margin-right: 20px;"></span>'; $childrens = $objBlock->getSubCategories($categoryId); if(count($childrens) && $category['cat_level'] > 1) $msgEpand = '<span id="mexpandVer" onClick="expandItemVer(this); return false;">+</span>'; echo $msgEpand.'<input type="checkbox" class="mytree-l-tcb" id="ext-gen'.$categoryId.'" '.$chk.' value="'.$categoryId.'" onClick="myVerCatSelect(this)">'; } echo '<a id="a_'.$categoryId.'" target="_blank" >'; echo '<span id="span_'.$categoryId.'">'.$category['name'].'</span>'; echo '</a>'; if ($currLevel > $prevLevel) { $prevLevel = $currLevel; } $currLevel++; ver_createTree($array, $categoryId, $currLevel, $prevLevel); $currLevel--; } } if ($currLevel == $prevLevel) echo "</li></ul> "; } ?> <script type="text/javascript">
	
	
	  
	
	
		
		
		
		
		

		
		
		
		

		
		

	
	
		
			
			
			
			
		
	
	function expandItemVer(el){
		$(el).next().next().next().toggle();
		if($(el).next().next().next().getStyle('display') == "block") { $(el).innerHTML = "-"; }
		if($(el).next().next().next().getStyle('display') == "none") { $(el).innerHTML = "+"; }
	}</script><div id="top_sidetree"><!-- <div class="sidetreecontrol"><a href="?#">Expand All</a> | <a href="?#">Collapse All</a></div> --><div id="top_tree"><?php ver_createTree($arrayCategories, 0); ?></div></div>