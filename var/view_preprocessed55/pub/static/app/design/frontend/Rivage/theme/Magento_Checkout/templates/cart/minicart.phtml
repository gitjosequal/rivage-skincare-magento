<?php /** * Copyright Â© Magento, Inc. All rights reserved. * See COPYING.txt for license details. */ /** @var $block \Magento\Checkout\Block\Cart\Sidebar */ ?> <?php $objectManager = \Magento\Framework\App\ObjectManager::getInstance(); $has_item = $objectManager->create('\Amasty\Promo\Helper\Data'); $helper = $this->helper('\Magento\Checkout\Helper\Cart'); $check_promo_items = (bool)$has_item->getNewItems() || $helper->getSummaryCount() == 0; $customerSession = $objectManager->get('Magento\Customer\Model\Session'); ?> <li class="link authorization-link" data-label="<?= $escaper->escapeHtml(__('or')) ?>"><a href="<?= $block->escapeUrl($block->getUrl('customer/account')); ?>"><img src="/media/wysiwyg/icons/account.png" alt=""><span class="d-none d-md-block"><?php echo ($customerSession->isLoggedIn()) ? 'ACCOUNT' : 'LOG IN' ; ?></span></a></li> <li data-block="minicart" class="minicart-wrapper"><a class="action showcart" href="<?= /* @escapeNotVerified */ $block->getShoppingCartUrl() ?>" data-bind="scope: 'minicart_content'"><span class="text m-0"><img src="/media/wysiwyg/icons/bag.png" alt=""><span class="d-none d-md-inline-block"><?= /* @escapeNotVerified */ __('BAG') ?></span></span> <span class="counter qty empty" data-bind="css: { empty: !!getCartParam('summary_count') == false }, blockLoader: isLoading"><span class="counter-number"><!-- ko text: getCartParam('summary_count') --><!-- /ko --></span> <span class="counter-label"><!-- ko if: getCartParam('summary_count') --><!-- ko text: getCartParam('summary_count') --><!-- /ko --><!-- ko i18n: 'items' --><!-- /ko --><!-- /ko --></span></span></a> <?php if ($block->getIsNeedToDisplaySideBar()): ?> <div class="block block-minicart empty" data-role="dropdownDialog" data-mage-init='{"dropdownDialog":{ "appendTo":"[data-block=minicart]", "triggerTarget":".showcart", "timeout": "2000", "closeOnMouseLeave": false, "closeOnEscape": true, "triggerClass":"active", "parentClass":"active", "buttons":[]}}'><div id="minicart-content-wrapper" data-bind="scope: 'minicart_content'"><!-- ko template: getTemplate() --><!-- /ko --></div><?= $block->getChildHtml('minicart.addons') ?></div><?php endif ?> <script>
        
        window.checkout = <?= /* @escapeNotVerified */ $block->getSerializedConfig() ?>;
        <?php if($check_promo_items) { ?>
            window.checkoutMinicart = '<?php echo $this->getUrl('samplesproducts'); ?>'
        <?php } else { ?> window.checkoutMinicart = '<?php echo $this->getUrl('checkout'); ?>';
        <?php } ?></script><script type="text/x-magento-init">
    {
        "[data-block='minicart']": {
            "Magento_Ui/js/core/app": <?= /* @escapeNotVerified */ $block->getJsLayout() ?>
        },
        "*": {
            "Magento_Ui/js/block-loader": "<?= /* @escapeNotVerified */ $block->getViewFileUrl('images/loader-1.gif') ?>"
        }
    }</script></li>